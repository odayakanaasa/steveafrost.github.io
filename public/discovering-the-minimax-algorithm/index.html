<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title data-react-helmet="true">Discovering the Minimax Algorithm | Steve Frost | Full-Stack Web Developer</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75em Merriweather,Georgia,serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:Merriweather,Georgia,serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:3.5rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Merriweather,Georgia,serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:2.625rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Merriweather,Georgia,serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.75rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Merriweather,Georgia,serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.75rem;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Merriweather,Georgia,serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.75rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Merriweather,Georgia,serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.75rem;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;-moz-font-feature-settings:tnum;-ms-font-feature-settings:tnum;-webkit-font-feature-settings:tnum;padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}</style><link href="//fonts.googleapis.com/css?family=Montserrat:700|Merriweather:400,400i,700,700i,900,900i" rel="stylesheet" type="text/css"/><style>.markdown pre{display:block;background:#3f3f3f;color:#dcdcdc;overflow-y:hidden}.markdown pre code{background:none;border:none;border-radius:3px;display:inline-block;overflow:inherit;padding:25.333px;padding:1.58333rem;white-space:inherit;word-wrap:normal}code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;background:#e5e5e5;border:1px solid #ccc;display:inline;font-family:Inconsolata,monospace,serif;max-width:100%;overflow:auto;padding:0 2.6px;padding:0 .1625rem}.clojure .hljs-attribute,.css .hljs-class,.css .hljs-id,.hljs-keyword,.hljs-request,.hljs-status,.hljs-tag,.lisp .hljs-title,.nginx .hljs-title{color:#e3ceab}.django .hljs-filter .hljs-argument,.django .hljs-template_tag,.django .hljs-variable{color:#dcdcdc}.hljs-date,.hljs-number{color:#8cd0d3}.apache .hljs-sqbracket,.dos .hljs-envvar,.dos .hljs-stream,.hljs-variable{color:#efdcbc}.diff .hljs-change,.dos .hljs-flow,.hljs-literal,.python .exception,.python .hljs-built_in,.tex .hljs-special{color:#efefaf}.diff .hljs-chunk,.hljs-subst{color:#8f8f8f}.apache .hljs-tag,.diff .hljs-header,.dos .hljs-keyword,.haskell .hljs-type,.hljs-prompt,.hljs-title,.nginx .hljs-built_in,.python .hljs-decorator,.ruby .hljs-class .hljs-parent,.tex .hljs-command{color:#efef8f}.dos .hljs-winutils,.ruby .hljs-string,.ruby .hljs-symbol,.ruby .hljs-symbol .hljs-string{color:#dca3a3}.apache .hljs-cbracket,.coffeescript .hljs-attribute,.css .hljs-rules .hljs-value,.diff .hljs-deletion,.hljs-attr_selector,.hljs-built_in,.hljs-javadoc,.hljs-pragma,.hljs-preprocessor,.hljs-pseudo,.hljs-string,.hljs-tag .hljs-value,.smalltalk .hljs-array,.smalltalk .hljs-class,.smalltalk .hljs-localvars,.sql .hljs-aggregate,.tex .hljs-formula{color:#cc9393}.diff .hljs-addition,.hljs-comment,.hljs-doctype,.hljs-pi,.hljs-shebang,.hljs-template_comment,.java .hljs-annotation{color:#7f9f7f}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .css,.xml .hljs-cdata,.xml .javascript,.xml .vbscript{opacity:.5}</style></head><body><div id="react-mount"><div style="max-width:52.5rem;margin-left:auto;margin-right:auto;padding:2.625rem 1.3125rem;" data-reactroot="" data-reactid="1" data-react-checksum="252156632"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="3">Steve Frost | Full-Stack Web Developer</a></h3><div class="markdown" data-reactid="4"><!-- react-empty: 5 --><h1 style="margin-top:0;" data-reactid="6">Discovering the Minimax Algorithm</h1><div data-reactid="7"><p><img src="/img/blogs/minimax1.jpg" alt="algorithm-on-chalk-board"></p>
<p>For the past few weeks I’ve been trying, failing, and trying again to implement the <a href="http://neverstopbuilding.com/minimax">minimax algorithm</a> into a game of tic-tac-toe that I built using Javascript. Completing the challenge didn’t come all at once but rather in pieces: deciding on the approach, understanding the objective of minimax, and implementing the algorithm.</p>
<h3>About Minimax</h3>
<p>Minimax is a exceptional algorithm for situations when a person needs to make a decision and has all the surrounding, encompassing information regarding all decisions. In relation to games, that matches activities such as chess, checkers, and tic-tic-toe. On the other hand, situations where each person does not have the particulars like scrabble, poker, or blackjack cannot use this minimax algorithm although <a href="https://www.wired.com/2017/02/libratus/">there is evidence</a> that computers have solved those as well.</p>
<h3>Approach</h3>
<p>Previously, I had built a <a href="https://github.com/steveafrost/tic-tac-toe-rb-q-000">tic-tac-toe in command-line</a> using Ruby. Instead of recycling this code, I wanted to choose a new approach in both language and user interface so as to learn fresh ideas. Instead of command-line, I created a browser interface which you can see below. The interface makes use of a lightweight CSS boilerplate called <a href="http://getskeleton.com/">Skeleton</a> that I included to give the board &amp; buttons some proper styling and also to make the interface responsive. As far as the building blocks, instead of Ruby, I decided to use Javascript to improve on my skills in this second language. At first I built out the entire program as individual functions as a rough draft to establish a foundation and be able to focus on the algorithm itself. Speaking of minimax…</p>
<p><img src="/img/blogs/minimax2.jpg" alt="tic-tac-toe-ui"></p>
<h3>Understanding Minimax</h3>
<p>When starting on an assignment or project, starting to code immediately always seems appealing but in my experience I’ve found it is almost always counterproductive. Instead, the most rewarding use of time is reading, writing, doodling, watching videos, or <a href="https://blog.codinghorror.com/rubber-duck-problem-solving/">talking through it</a> before typing even a single character into a text editor. Typically, there is no lack of programming materials that can help sleuth an issue and I found that to be true of minimax as well. The most helpful pages were <a href="https://mostafa-samir.github.io/">Mostafa Samir’s advice</a> and <a href="https://blog.vivekpanyam.com/how-to-build-an-ai-that-wins-the-basics-of-minimax-search/">Vivek Panyam’s pointers</a>. It is helpful that each of these are done in different styles and the former actually inspired me to restructure my code using ES6 classes since Mostafa used prototype in his solution.</p>
<p>After reading these, and several other, posts I also watched a <a href="https://www.youtube.com/watch?v=aWhb9dr1jNw&amp;t=2098s">video on YouTube</a> and walked through <a href="https://app.pluralsight.com/library/courses/algorithmics-introduction/table-of-contents">intro to algorithms</a> on PluralSight. Following these, I started to doodle in my random thoughts notebook a few times a week when traveling to and from work on the subway. Needless to say, the rock of the train made for some messy notes. Nevertheless, the doodling was likely the most productive and propelled me into the actual implementation.</p>
<p>Following my research about the algorithm, I realized I had to learn another idea, recursion. Recursion is critical to the minimax algorithm because it handles the logic of iterating over subsequent states of the game being played. The <a href="http://www.dictionary.com/browse/recursion">dictionary definition</a> of recursion sums it up succinctly: “the process of defining a function or calculating a number by the repeated application of an algorithm.”</p>
<pre><code class="language-javascript">minimax(state) {
  <span class="hljs-keyword">if</span> (currentGame.over(state)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.score(state);
  }

  <span class="hljs-keyword">let</span> scores = [];
  <span class="hljs-keyword">let</span> moves = [];
  <span class="hljs-keyword">let</span> availablePositions = currentGame.availableMoves(state);

  <span class="hljs-keyword">let</span> nextStates = availablePositions.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">position</span>) </span>{
    <span class="hljs-keyword">return</span> currentAI.nextState(position);
  });

  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> singleState <span class="hljs-keyword">of</span> nextStates) {
    scores.push(currentAI.minimax(singleState));
  }
}
</code></pre>
<h3>Implementing the Algorithm</h3>
<p>Although it is immensely helpful to read, watch, and write about an idea before starting coding, at some point the building must begin. Based on my notes &amp; doodles, I knew I wanted to implement minimax using two core functions - <code>minimax()</code> and <code>score()</code>. The first, minimax, would be used to do the actual state generation itself and then recursively pass each state back into minimax. If you’ve just hesitated and had flashes of <code>call stack exceeded</code> or infinite loops - you’re right. To avoid these issues, recursive functions must have an exit once a condition is met. Above, you can see <code>minimax()</code> exits once the current game has reached an end state whether that be by win, loss, or tie.</p>
<pre><code class="language-javascript">score(state) {
  <span class="hljs-keyword">if</span> (currentGame.tie(state)) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentGame.player() === <span class="hljs-string">"X"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.depth - <span class="hljs-number">10</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentGame.player() === <span class="hljs-string">"O"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">10</span> - <span class="hljs-keyword">this</span>.depth;
  }
}
</code></pre>
<p>Once the terminal state is reached, <code>score()</code> then takes that terminal state and gives it a number based on how many moves – what I’ve been calling depth – and who is the current player. The depth aspect is used to give moves a higher weight which win, lose, or tie in less moves than others and leads to a truly undefeatable AI. This scoring aspect is actually how the algorithm gets it’s name. In practice, the recursive algorithm verifies who’s turn it is at each step and will take the <em>maximum</em> value move as the computer or the <em>minimum</em> value move if it is the players turn – hence minimax.</p>
<h3>Celebrate Perseverance</h3>
<p>As I stated earlier, this all didn’t happen in one iteration. Actually, it didn’t happen in two or three either and at one point I even took all the individual functions I had and rewrote them as ES6 classes to take on the code from a different angle. For the harder topics in programming, perseverance is key. Regularly I thought I wasn’t going to be able to solve the algorithm as a whole so I broke down what I had into smaller pieces until it made sense. This process of breaking down the daunting picture of recursion and an unfamiliar algorithm into smaller, concise pieces alleviated much of my stress and offered up more chances to celebrate success. Everybody loves celebrations.</p>
<p><img src="https://d3vv6lp55qjaqc.cloudfront.net/items/1D0s2i2U1s0v0G1k1J11/Image%202017-03-05%20at%205.26.46%20PM.gif" alt="celebration-gif">;</p>
</div><em style="display:block;margin-bottom:3.5rem;" data-reactid="8"><!-- react-text: 9 -->Posted <!-- /react-text --><!-- react-text: 10 -->March 5, 2017<!-- /react-text --></em><hr style="margin-bottom:3.5rem;" data-reactid="11"/><noscript data-reactid="12"></noscript></div><span style="display:block;clear:both;" data-reactid="13"> </span></div></div><script src="/bundle.js?t=1496807612716"></script></body></html>